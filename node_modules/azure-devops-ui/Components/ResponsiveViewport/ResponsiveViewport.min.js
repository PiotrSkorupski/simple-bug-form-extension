import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import*as React from"react";import{EventManagement}from"../../Core/EventManagement";import{TimerManagement}from"../../Core/TimerManagement";import{css}from"../../Util";var ResizeDelayMs=100,ResponsiveViewport=function(e){function t(t){var n=e.call(this,t)||this;n._onAsyncResize=function(){n._resize()},n._resolveElement=function(e){n._element=e};var i=t.initialWidth;return n.events=new EventManagement,n.timers=new TimerManagement,n.state={activeBreakpoints:null==i?[]:n._getActiveBreakpoints(i)},n._onAsyncResize=n.timers.throttle(n._onAsyncResize,ResizeDelayMs,{leading:!1}),n}return tslib_1.__extends(t,e),t.prototype.componentDidMount=function(){this.events.addEventListener(window,"resize",this._onAsyncResize),this._onAsyncResize()},t.prototype.componentWillUnmount=function(){this.events.removeAllListeners(),this.timers.dispose()},t.prototype.shouldComponentUpdate=function(e,t){if(this.props!==e)return!0;var n=t.activeBreakpoints,i=this.state.activeBreakpoints;return n.length!==i.length||n.some(function(e,t){return e!==i[t]})},t.prototype.render=function(){var e=this.props,t=e.tag,n=void 0===t?"div":t,i=e.className,o=e.children,s=e.onRenderContent,r=this.state.activeBreakpoints,a=s&&s(r)||o;return React.createElement(n,{className:css.apply(void 0,[i].concat(r&&r.map(function(e){return e.className}))),ref:this._resolveElement},a)},t.prototype.measure=function(){this._resize()},t.prototype._resize=function(){var e=this._element.getBoundingClientRect().width;this.setState({activeBreakpoints:this._getActiveBreakpoints(e)})},t.prototype._getActiveBreakpoints=function(e){return this.props.breakPoints.filter(function(t){return!(t.minWidth>=0&&e<t.minWidth)&&!(t.maxWidth>=0&&e>=t.maxWidth)})},t}(React.Component);export{ResponsiveViewport};