import*as tslib_1 from"tslib";import"../../../CommonImports";import"../../../Core/core.css";import*as React from"react";import*as DateUtil from"../../../Utilities/Date";import{Time}from"../Time/Time";var Ago=function(t){function e(i){var r=t.call(this,i)||this;return r.getTimeString=function(){return DateUtil.ago(r.props.date,r.props.format)},r.getNextInterval=function(){return e.agoNextInterval(r.props.date,r.props.format)},r.state={tooltipProps:{}},r}return tslib_1.__extends(e,t),e.getDerivedStateFromProps=function(t){return{tooltipProps:void 0===t.tooltipProps?{renderContent:function(){return DateUtil.tooltipString(t.date)}}:t.tooltipProps}},e.prototype.render=function(){return React.createElement(Time,{className:this.props.className,dateTime:this.props.date,getNextInterval:this.getNextInterval,getTimeString:this.getTimeString,tooltipProps:this.state.tooltipProps})},e.agoNextInterval=function(t,e,i){i||(i=new Date),e||(e=0);var r,o=i.getTime()-t.getTime();if(o<2*DateUtil.minute)r=2*DateUtil.minute-o;else if(o<59*DateUtil.minute&&0===e)r=DateUtil.minute-o%DateUtil.minute;else if(i.toDateString()===t.toDateString()&&0===e)r=DateUtil.hour-o%DateUtil.hour;else if(1===e&&i.toDateString()===t.toDateString()||o<DateUtil.week&&i.getDay()!==t.getDay()){var a=new Date(i);a.setDate(i.getDate()+1),a.setHours(0,0,0),r=a.getTime()-i.getTime()}else if(i.getFullYear()===t.getFullYear()){r=new Date(i.getFullYear()+1,0,1).getTime()-i.getTime()}return(!r||r>DateUtil.week)&&(r=-1),r},e}(React.Component);export{Ago};