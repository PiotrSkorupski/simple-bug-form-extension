import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Autocomplete.css";import*as React from"react";import*as Resources from"../../Resources.Label";import{css,getSafeId}from"../../Util";import{Spinner}from"../../Spinner";import{Label}from"../Label/Label";import{ColorPip,ColorSwatchPicker}from"../../Color";import{Icon}from"../../Icon";var Suggestions=function(e){function t(t){var o=e.call(this,t)||this;return o.currentSelectedElementRef=React.createRef(),o.onHoverNewRowEnd=function(){o.setState({isNewRowHovered:!1})},o.onHoverNewRowStart=function(){o.setState({isNewRowHovered:!0})},o.onRenderAlreadyIncludedRow=function(){var e=o.props.inputAlreadyInGroupText,t=void 0===e?Resources.LabelInGroup:e;return React.createElement("div",{className:"bolt-label-suggestions-row flex-row",key:"included"},React.createElement(Icon,{className:"bolt-label-suggestions-icon",iconName:"CheckMark"}),React.createElement("div",{className:"bolt-label-suggestions-row--content"},t))},o.onRenderLoadingRow=function(){return React.createElement("div",{className:"bolt-label-suggestions-loading-row",key:"loading"},React.createElement(Spinner,{size:"small",label:Resources.LoadingSuggestions}))},o.onRenderNewLabelRow=function(e){var t;return t=o.shouldDisplayColorPicker()?React.createElement(ColorSwatchPicker,{className:css(o.isNewRowSelected()&&"selected"),colors:e,onPipClick:o.props.onColorPipClick,selectedIndex:o.props.currentSelectedColorIndex}):React.createElement("div",{className:css("bolt-label-suggestions-row clickable flex-row",o.isNewRowSelected()&&"selected"),onClick:o.props.onNewLabelClick,role:"option",tabIndex:-1},React.createElement(ColorPip,{color:o.props.disableColorPicker&&Label.DEFAULT_COLOR}),React.createElement("div",{className:"bolt-label-suggestions-row--content"},Resources.NewLabelSuggestionText)),React.createElement("div",{className:"bolt-label-suggestions-newRow-wrapper",key:"newRow",onMouseEnter:o.onHoverNewRowStart,onMouseLeave:o.onHoverNewRowEnd},t)},o.onRenderSuggestionRow=function(e,t){var r=o.props.currentSelectedIndex===t;return React.createElement("div",{"aria-selected":r,className:css("bolt-label-suggestions-row clickable flex-row",r&&"selected"),id:getSafeId(e.content),key:e.content,onClick:function(t){return o.props.onSuggestionClick(t,e)},ref:r&&o.currentSelectedElementRef,role:"option",tabIndex:-1},React.createElement(ColorPip,{color:e.color}),React.createElement("div",{className:"bolt-label-suggestions-row--content"},React.createElement("span",null,e.content)))},o.state={isNewRowHovered:!1},o}return tslib_1.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.isCurrentInputAlreadyInGroup,o=e.isLoading,r=e.onCheckForExactMatch,n=e.suggestedItems,s=e.swatchPickerColors,l=32*s.length,c=[],a=o,i=t,u=!(i||void 0!==r&&r(n));a&&c.push(this.onRenderLoadingRow()),n.length>0&&c.push(React.createElement("div",{className:"bolt-label-suggestions-list",key:"suggestions"},n.map(this.onRenderSuggestionRow))),i&&c.push(this.onRenderAlreadyIncludedRow()),u&&c.push(this.onRenderNewLabelRow(s));var d=[];return c.forEach(function(e,t){0!==t&&d.push(React.createElement("div",{className:"bolt-suggestions-separator",key:"separator"+t})),d.push(e)}),React.createElement("div",{className:"bolt-label-suggestions-container flex-column",id:getSafeId("autocomplete-listbox"),role:"listbox",style:{minWidth:l}},d)},t.prototype.componentDidUpdate=function(){this.currentSelectedElementRef.current&&this.currentSelectedElementRef.current!==this.previousSelectedElement&&(this.currentSelectedElementRef.current.scrollIntoView(!1),this.previousSelectedElement=this.currentSelectedElementRef.current)},t.prototype.isNewRowSelected=function(){return this.props.currentSelectedIndex===this.props.suggestedItems.length},t.prototype.shouldDisplayColorPicker=function(){var e=this.props.disableColorPicker;return!(void 0!==e&&e)&&(this.isNewRowSelected()||this.state.isNewRowHovered)},t}(React.Component);export{Suggestions};