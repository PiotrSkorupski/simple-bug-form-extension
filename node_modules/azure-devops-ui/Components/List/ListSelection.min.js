import*as tslib_1 from"tslib";import{Selection}from"../../Utilities/Selection";var ListSelection=function(e){function t(t){var l=e.call(this,"boolean"==typeof t||void 0===t?t:{alwaysMerge:t.alwaysMerge,multiSelect:t.multiSelect,unselectableRanges:t.unselectableRanges,selectedRanges:t.selectedRanges})||this;return l.selectOnFocus=!0,"boolean"!=typeof t&&void 0!==t&&(l.selectOnFocus=void 0===t.selectOnFocus||t.selectOnFocus),l}return tslib_1.__extends(t,e),t}(Selection);export{ListSelection};var FilteredListSelection=function(e){function t(t){var l=e.call(this,{alwaysMerge:t.alwaysMerge,multiSelect:t.multiSelect,unselectableRanges:t.unselectableRanges,selectedRanges:t.value,selectOnFocus:t.selectOnFocus})||this;return l.filteredIndexMap=[],l.updateFilteredSelection=function(e){if(0===e.length)l.value=l.selection.value.slice(),l.unselectableRanges=l.selection.unselectableRanges.slice();else{var t=new Selection(l.selection.multiSelect);e.map(function(e,n){l.selection.selected(e)&&t.select(n,1,!0),l.selection.selectable(e)||t.addUnselectable(n)}),l.value=t.value.slice(),l.unselectableRanges=t.unselectableRanges.slice()}l.filteredIndexMap=e},l.selectionChanged=function(e,t){switch(t){case"addUnselectable":for(s=0;s<e.length;s++)for(n=e[s].beginIndex;n<=e[s].endIndex;n++){c=l.filteredIndexMap.length>0?l.filteredIndexMap.indexOf(n):n;l.selectable(c)&&l.addUnselectable(c,1)}break;case"removeUnselectable":for(s=0;s<e.length;s++)for(var n=e[s].beginIndex;n<=e[s].endIndex;n++){c=l.filteredIndexMap.length>0?l.filteredIndexMap.indexOf(n):n;l.selectable(c)||l.removeUnselectable(c,1)}break;case"setUnselectable":case"set":l.updateFilteredSelection(l.filteredIndexMap);break;case"select":for(s=0;s<e.length;s++)for(i=e[s].beginIndex;i<=e[s].endIndex;i++){c=l.filteredIndexMap.length>0?l.filteredIndexMap.indexOf(i):i;l.selected(c)||l.select(c,1,!0)}break;case"unselect":for(var s=0;s<e.length;s++)for(var i=e[s].beginIndex;i<=e[s].endIndex;i++){var c=l.filteredIndexMap.length>0?l.filteredIndexMap.indexOf(i):i;l.selected(c)&&l.unselect(c,1)}}},l.selection=t,l}return tslib_1.__extends(t,e),t.prototype.select=function(t,l,n){if(e.prototype.select.call(this,t,l,n),this.filteredIndexMap.length>0){n||this.clear(),l=l||1;for(var s=0;s<l;s++)this.selection.select(this.filteredIndexMap[t+s],1,!0)}else this.selection.select(t,l,n)},t.prototype.unselect=function(t,l){if(e.prototype.unselect.call(this,t,l),this.filteredIndexMap.length>0){l=l||1;for(var n=0;n<l;n++)this.selection.unselect(this.filteredIndexMap[t+n],1)}else this.selection.unselect(t,l)},t.prototype.clear=function(){if(e.prototype.clear.call(this),this.filteredIndexMap.length>0)for(var t=0;t<this.filteredIndexMap.length;t++)this.selection.unselect(this.filteredIndexMap[t]);else this.selection.clear()},t}(ListSelection);export{FilteredListSelection};