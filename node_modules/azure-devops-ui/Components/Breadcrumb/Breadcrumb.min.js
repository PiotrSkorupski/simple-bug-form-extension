function getLinkItems(e){return e.filter(function(e){return e.href||e.onClick})}function arrangeItems(e){if(void 0===e)return[];var t={};e.forEach(function(e){(!t[e.key]||(t[e.key].priority||0)<=(e.priority||0))&&(t[e.key]=e)});var r=[];Object.keys(t).forEach(function(e){t[e].hidden||r.push(t[e])});return r.some(function(e){return e.rank>=0})&&r.sort(function(e,t){return(e.rank||Number.MAX_VALUE)-(t.rank||Number.MAX_VALUE)}),r}import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Breadcrumb.css";import*as React from"react";import{Link}from"../../Link";import{OverflowButton,ResizeGroup}from"../../ResizeGroup";import{Tooltip}from"../../TooltipEx";import{css,getSafeId}from"../../Util";import*as Resources from"../../Resources.Breadcrumb";var breadcrumbCount=0,Breadcrumb=function(e){function t(r){var a=e.call(this,r)||this;return a.renderBreadcrumbItems=function(){var e=a.props,t=e.excludeFocusZone,r=e.excludeTabStop,o=e.extraContent,n=e.role,c=a.state,i=c.displayedItems,m=c.hiddenItemCount,s=a.props.ariaLabel||Resources.BreadcrumbItemAriaLabel,l=i.length-1,u=i.map(function(e,t){return React.createElement("div",{className:"bolt-breadcrumb-list-item",key:e.key||String(t)},a.renderItem(e),t!==l&&a.getDivider(e.key))});return u.splice(0,0,React.createElement("div",{className:css("bolt-breadcrumb-overflow",m>0&&"bolt-breadcrumb-overflow-visible"),key:"overflowItem"},React.createElement(OverflowButton,{excludeTabStop:r,excludeFocusZone:t}),m>0&&m<i.length&&a.getDivider("overflow"))),o&&u.push(React.createElement("div",{key:"breadcrumb-extra-content",id:getSafeId("breadcrumb-extra-content")},o)),React.createElement("div",{className:css("bolt-breadcrumb flex-row flex-grow",u.length>0&&"bolt-breadcrumb-with-items"),role:n,"aria-label":s},u)},a.renderItem=function(e){var t=React.createElement(Tooltip,{text:e.text,overflowOnly:!0},React.createElement("span",{className:"bolt-breadcrumb-item-text"},e.text)),r="bolt-breadcrumb"+a.breadcrumbId+"-item-described-by"+e.key;return e.onClick||e.href?React.createElement("div",{className:"bolt-breadcrumb-item"},React.createElement(Link,{ariaLabel:e.ariaLabel,ariaDescribedBy:r,key:"BreadcrumbItem$"+e.key,onClick:e.onClick,href:e.href,excludeFocusZone:a.props.excludeFocusZone,excludeTabStop:a.props.excludeTabStop},React.createElement("div",{className:"bolt-breadcrumb-item-text-container"},t),React.createElement("div",{className:"bolt-breadcrumb-hidden-element",id:getSafeId(r)},e.ariaDescription))):React.createElement("div",{className:"bolt-breadcrumb-item","aria-label":e.ariaLabel},t)},a.getDivider=function(e){return React.createElement("div",{key:"BreadcrumbItemDivider$"+e,className:"bolt-breadcrumb-divider"},React.createElement("div",{className:"bolt-breadcrumb-forward-slash"},"/"))},a.onLayoutChanged=function(e){a.setState({hiddenItemCount:e})},a.onMenuItemActivate=function(e,t){var r=e.data;r.onClick&&r.onClick(t,r)},a.breadcrumbId=breadcrumbCount++,a.state=t.getDerivedStateFromProps(r,a.state),a}return tslib_1.__extends(t,e),t.getDerivedStateFromProps=function(e,t){var r=arrangeItems(e.items);return tslib_1.__assign({},t,{displayedItems:r,linkItems:getLinkItems(r)})},t.prototype.render=function(){var e=this,t=this.state.displayedItems,r=t.map(function(t,r){return{data:t,text:t.text,key:t.key,id:t.key,onActivate:e.onMenuItemActivate,href:t.href}}),a={responsiveChildren:t.map(function(e,t){return t+1}),onLayoutChange:this.onLayoutChanged};return React.createElement("div",{className:css("bolt-breadcrumb-container",t.length>0&&"bolt-breadcrumb-with-items",this.props.className)},React.createElement(ResizeGroup,{responsiveLayoutProps:a,overflowMenuItems:r},this.renderBreadcrumbItems()))},t.defaultProps={items:[]},t}(React.Component);export{Breadcrumb};