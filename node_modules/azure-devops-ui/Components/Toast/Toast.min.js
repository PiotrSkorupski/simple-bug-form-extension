import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Toast.css";import*as React from"react";import{Callout}from"../../Callout";import{Button}from"../../Button";import{Measure}from"../../Measure";import{css}from"../../Util";import{makeCancelable}from"../../Core/Util/Promise";var Toast=function(t){function e(e){var o=t.call(this,e)||this;return o.onCallToActionClick=function(t){o.props.onCallToActionClick&&o.props.onCallToActionClick(t)},o.onMeasureCallToAction=function(t,e){o.setState({callToActionWidth:t})},o.state={fadingOut:!1},o}return tslib_1.__extends(e,t),e.prototype.fadeOut=function(){var t=this;this.fadeOutPromise&&this.fadeOutPromise.cancel();var e=new Promise(function(e){t.setState({fadingOut:!0}),setTimeout(function(){e()},500)});return this.fadeOutPromise=makeCancelable(e),this.fadeOutPromise},e.prototype.render=function(){var t=this.props,e=t.message,o=t.callToAction,a=t.className,n=this.state,s=n.callToActionWidth,i=n.fadingOut,l=!o||!s||s<=120,c=l?"one-line flex-row":"multi-line flex-column",r=l?"flex-grow":void 0,m=i?"fade-out":void 0;return React.createElement(Callout,{className:css(a,"bolt-toast no-events"),contentClassName:css("bolt-toast-content",c,m),contentJustification:1,contentLocation:2},React.createElement("span",{className:css("bolt-toast-message flex-shrink",r)},e),o&&React.createElement(React.Fragment,null,React.createElement("span",{className:"bolt-toast-separator flex-noshrink"}),React.createElement(Measure,{onMeasure:this.onMeasureCallToAction},React.createElement("div",{className:"bolt-toast-call-to-action-container"},React.createElement(Button,{className:"bolt-toast-call-to-action flex-noshrink",subtle:!0,onClick:this.onCallToActionClick},o)))))},e.prototype.componentWillUnmount=function(){this.fadeOutPromise&&this.fadeOutPromise.cancel()},e}(React.Component);export{Toast};