import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./RadioButton.css";import*as React from"react";import{FocusGroupContext}from"../../FocusGroup";import{FocusZone,FocusZoneContext}from"../../FocusZone";import{Observer}from"../../Observer";import{Tooltip}from"../../TooltipEx";import{css,getSafeId,noop}from"../../Util";import{getTabIndex}from"../../Utilities/Focus";export var RadioButtonGroupContext=React.createContext({onSelect:noop});var groupId=1,RadioButtonGroup=function(t){function e(e){var o=t.call(this,e)||this;return o.focusGroupContext=React.createRef(),o.onChange=function(t){o.props.onSelect&&o.props.onSelect(t)},o._getFirstButtonId=function(){var t=React.Children.toArray(o.props.children);if(t.length){return t[0].props.id}},o._id="radio-group-"+groupId++,o}return tslib_1.__extends(e,t),e.prototype.render=function(){var t=this,e=this.props.direction,o=css(this.props.className,"bolt-radio-button-group",2===e?"flex-column":"flex-row");return React.createElement(Observer,{selectedButtonId:this.props.selectedButtonId},function(e){return React.createElement(RadioButtonGroupContext.Provider,{value:{onSelect:t.onChange,selectedButtonId:e.selectedButtonId||t._getFirstButtonId()}},React.createElement("div",{className:css(t.props.excludeFocusZone&&o)},t.props.text&&React.createElement("div",{className:"bolt-radio-button-group-text"},t.props.text),t.props.excludeFocusZone?t.props.children:React.createElement(FocusZone,{direction:2===t.props.direction?2:1,circularNavigation:!0,focusGroupProps:{defaultElementId:t.props.defaultButtonId||e.selectedButtonId||t._getFirstButtonId(),ref:t.focusGroupContext}},React.createElement("div",{className:o,id:getSafeId(t.props.id||t._id),role:"radiogroup"},t.props.children))))})},e.prototype.focus=function(){this.focusGroupContext.current&&this.focusGroupContext.current.focus()},e.defaultProps={direction:2},e}(React.Component);export{RadioButtonGroup};var RadioButton=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.radioButtonInternal=React.createRef(),e}return tslib_1.__extends(e,t),e.prototype.render=function(){var t=this;return React.createElement(RadioButtonGroupContext.Consumer,null,function(e){return React.createElement(FocusGroupContext.Consumer,null,function(o){return React.createElement(FocusZoneContext.Consumer,null,function(r){return React.createElement(RadioButtonInternal,tslib_1.__assign({},t.props,{focusGroupContext:o,focuszoneId:r.focuszoneId,onFocus:o.onFocus,onSelect:e.onSelect,selectedButton:e.selectedButtonId===t.props.id,ref:t.radioButtonInternal}))})})})},e.prototype.focus=function(){this.radioButtonInternal.current&&this.radioButtonInternal.current.focus()},e}(React.Component);export{RadioButton};var RadioButtonInternal=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.radioButton=React.createRef(),e.onClick=function(t){t.defaultPrevented||e.props.disabled||(e.props.onSelect(e.props.id),t.preventDefault())},e.onFocus=function(t){e.props.onFocus(e.props.id)},e.onKeyPress=function(t){t.defaultPrevented||e.props.disabled||13!==t.which&&32!==t.which||(e.props.onSelect(e.props.id),t.preventDefault())},e}return tslib_1.__extends(e,t),e.prototype.render=function(){var t=getTabIndex(this.props,this.props.focusGroupContext),e=this.props.text&&"rb-label-"+this.props.id,o=React.createElement("div",{"aria-checked":this.props.selectedButton,"aria-disabled":this.props.disabled,"aria-labelledby":getSafeId(this.props.ariaLabelledBy||e),className:css(this.props.className,"bolt-radio-button cursor-pointer",this.props.disabled?"disabled":"enabled",this.props.selectedButton&&"checked",(this.props.text||React.Children.count(this.props.children)>0)&&"labelled","bolt-focus-treatment"),"data-focuszone":this.props.disabled||this.props.excludeFocusZone?void 0:this.props.focuszoneId,"data-is-focusable":this.props.disabled?"false":"true",id:getSafeId(this.props.id),key:this.props.id,onClick:this.onClick,onFocus:this.onFocus,onKeyPress:this.onKeyPress,ref:this.radioButton,role:this.props.role||"radio",tabIndex:t},React.createElement("div",{className:"bolt-radio-button-icon"},React.createElement("div",{className:"bolt-radio-button-bullet"})),this.props.text&&React.createElement("div",{className:"bolt-radio-button-label",id:getSafeId(e)},this.props.text),this.props.children);return this.props.tooltipProps&&(o=React.createElement(Tooltip,tslib_1.__assign({},this.props.tooltipProps),o)),o},e.prototype.focus=function(){this.radioButton.current&&this.radioButton.current.focus()},e}(React.Component);