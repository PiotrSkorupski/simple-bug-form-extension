import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Tabs.css";import*as React from"react";import{Tab}from"./Tab";import{TabGroupProviderContext}from"./TabGroupProviderContext";import{TabProviderContext}from"./TabProviderContext";import{Tabs}from"./Tabs";import{ObservableLike}from"../../Core/Observable";import{css}from"../../Util";var TabList=function(e){function r(r){var t=e.call(this,r)||this;return t.generateGroupMap=function(e){if(!e)return{};var r={};return e.forEach(function(e){r[e.id]=e}),r},t.processChildren=function(e){var r={};return React.Children.forEach(t.props.children,function(t){if(t){var o=t.props.groupId||"";r[o]?r[o].items.push(t):r[o]={items:[t],groupProps:e[o]||{id:"",name:"",order:-1}}}}),r},t.processContributions=function(e,r,o){return e.forEach(function(e){var n=t.createRow(e),s=e.groupId||"";o[s]?o[s].items.push(n):o[s]={items:[n],groupProps:r[s]||{id:"",name:"",order:-1}}}),o},t.processGroups=function(e){var r=[],t=[];for(var o in e)t.push(e[o]);return t.sort(function(e,r){return(e.groupProps.order||1e3)-(r.groupProps.order||1e3)}).forEach(function(e){e.groupProps.name&&r.push(React.createElement("div",{key:e.groupProps.name,className:"bolt-tablist-heading title-xs flex-noshrink"},e.groupProps.name)),r.push.apply(r,e.items)}),r},t.createRow=function(e){return React.createElement(Tab,{key:e.id,id:e.id,name:e.name,url:e.url&&ObservableLike.getValue(e.url),onBeforeTabChange:e.onBeforeTabChange,iconProps:e.iconProps})},t.renderTitle=function(e){return React.createElement("div",{className:"bolt-tablist-title title-s flex-noshrink"},e)},t.onSelectedTabIdChanged=function(){t.forceUpdate()},t}return tslib_1.__extends(r,e),r.prototype.render=function(){var e=this;return React.createElement(TabGroupProviderContext.Consumer,null,function(r){var t=e.props,o=t.className,n=t.tabGroups,s=n?n.concat(r.groups):r.groups,a=e.generateGroupMap(s);return React.createElement(TabProviderContext.Consumer,null,function(r){var t=e.props.selectedTabId||r.selectedId,n=e.processContributions(r.tabs,a,e.processChildren(a)),s=e.processGroups(n);return React.createElement("div",{className:css(o,"bolt-tablist flex-column")},e.props.listTitle&&e.renderTitle(e.props.listTitle),React.createElement(Tabs,tslib_1.__assign({selectedTabId:t},e.props,{className:"bolt-tablist-tabs",orientation:1}),s))})})},r}(React.Component);export{TabList};