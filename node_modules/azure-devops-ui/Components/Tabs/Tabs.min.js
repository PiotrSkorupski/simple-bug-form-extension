import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Tabs.css";import*as React from"react";import{ObservableLike}from"../../Core/Observable";import{FocusZone}from"../../FocusZone";import{css}from"../../Util";var Tabs=function(e){function t(t){var o=e.call(this,t)||this;return o.onTabClick=function(e){var t=o.props.onSelectedTabChanged,s=o._tabPropsMap[e],r=s.onBeforeTabChange,a=s.url;r&&r(null,e,a),t&&t(e)},o.onSelectedTabIdChanged=function(){o.forceUpdate()},o._tabPropsMap={},ObservableLike.isObservable(t.selectedTabId)&&t.selectedTabId.subscribe(o.onSelectedTabIdChanged),o}return tslib_1.__extends(t,e),t.prototype.componentWillUnmount=function(){ObservableLike.isObservable(this.props.selectedTabId)&&this.props.selectedTabId.unsubscribe(this.onSelectedTabIdChanged)},t.prototype.render=function(){var e,t=this,o=this.props,s=o.tabSize,r=void 0===s?"tall":s,a=o.orientation,i=void 0===a?0:a,p=this.props.selectedTabId&&ObservableLike.getValue(this.props.selectedTabId),n=0,l=0,c={};React.Children.map(this.props.children,function(t){t&&(c[t.props.id]=l++,n++,!e&&t.props.id&&(e="tab-"+t.props.id))});var b=React.Children.map(this.props.children,function(e){if(e&&"string"!=typeof e.type){var o=(e.props.id&&e.props.id.toLocaleLowerCase())===(p&&p.toLocaleLowerCase()),s=t.onTabClick;return t._tabPropsMap[e.props.id]=e.props,React.cloneElement(e,tslib_1.__assign({},e.props,{isSelected:o,onClick:s,index:c[e.props.id],setSize:n}))}return e}),d=1===i?"flex-column":"flex-row",m=1===i?2:1;return React.createElement(FocusZone,{direction:m,focusGroupProps:{defaultElementId:e}},React.createElement("div",{className:css(this.props.className,"bolt-tabs",d,r),role:"tablist"},b))},t}(React.Component);export{Tabs};