import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Tabs.css";import*as React from"react";import{Pill}from"../../Pill";import{FocusGroupContext}from"../../FocusGroup";import{FocusZoneContext}from"../../FocusZone";import{Icon}from"../../Icon";import{Tooltip}from"../../TooltipEx";import{css,getSafeId}from"../../Util";import{getFriendlyDisplayValue}from"../../Utilities/FriendlyNumber";import{Observer}from"../../Observer";var Tab=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(e){var o=t.props.url,r=!0;e.ctrlKey&&o&&(r=!1),r&&(e.preventDefault(),t.updateSelectedItem(e))},t.onKeyDown=function(e){e.defaultPrevented||32!==e.which&&13!==e.which||(e.preventDefault(),t.updateSelectedItem(e))},t}return tslib_1.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props,o=t.ariaLabel,r=t.index,n=t.setSize,a=t.id,i=t.isSelected,s=t.url,l=s?"a":"div";return React.createElement(Observer,{badgeCount:this.props.badgeCount},function(t){var c=e.renderTabContent(t.badgeCount);return React.createElement(FocusGroupContext.Consumer,null,function(t){return React.createElement(FocusZoneContext.Consumer,null,function(p){return React.createElement(l,{"aria-label":o,"aria-posinset":void 0!==r?r+1:void 0,"aria-selected":i,"aria-setsize":n,className:css("bolt-tab focus-treatment",i?"selected":""),"data-focuszone":p.focuszoneId,href:s,id:getSafeId("tab-"+a),key:a,onClick:e.onClick,onKeyDown:e.onKeyDown,role:"tab",tabIndex:t.focusedElementId==="tab-"+a?0:-1},c)})})})},t.prototype.renderTabContent=function(e){var t=this.props,o=t.name,r=t.iconProps,n=t.ariaLabel,a=void 0!==e?getFriendlyDisplayValue(e):void 0,i=void 0;e&&a!==e.toString()&&(i=e.toString());var s=a&&React.createElement(Pill,{className:"bolt-tab-badge",containsCount:!0,size:0,contentClassName:"text-ellipsis",excludeTabStop:!0},a);i&&(s=React.createElement(Tooltip,{text:i},s));var l=void 0!==r&&Icon(tslib_1.__assign({className:"bolt-tab-icon"},r)),c=o&&React.createElement(Tooltip,{text:o,overflowOnly:!0},React.createElement("span",{className:"bolt-tab-text"},o));return l&&!c&&n&&(l=React.createElement(Tooltip,{text:n},l)),React.createElement("span",{className:"bolt-tab-inner-container"},l,c,s)},t.prototype.updateSelectedItem=function(e){var t=this.props.onClick;e&&this.props.onBeforeTabChange&&!this.props.onBeforeTabChange(e,this.props.id,this.props.url)?e.preventDefault():t&&t(this.props.id)},t}(React.Component);export{Tab};