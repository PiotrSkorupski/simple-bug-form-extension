import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./SuggestionsList.css";import*as React from"react";import{Observer}from"../../Observer";import{Spinner}from"../../Spinner";import{css,getSafeId,preventDefault}from"../../Util";var SuggestionsItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSuggestionClicked=function(e){e.isDefaultPrevented()||(t.props.onClick(t.props),e.preventDefault())},t}return tslib_1.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.renderSuggestion,s=(e.onClick,e.className),n=(e.item,e.isSelected);return React.createElement("div",{className:css(s,"bolt-suggestions-item flex-row flex-grow cursor-pointer scroll-hidden",n&&"bolt-suggestions-isSuggested")},React.createElement("div",{onClick:this.onSuggestionClicked,className:"bolt-suggestions-item-button flex-row flex-grow scroll-hidden"},t(this.props)))},t}(React.Component);export{SuggestionsItem};var SuggestionsList=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectedElement=React.createRef(),t}return tslib_1.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,s=e.renderNoResultFound,n=e.suggestions,o=e.isLoading,r=e.loadingText,i=!(n&&n.length||o);return React.createElement("div",{className:css(t,"bolt-suggestions flex-row flex-grow"),style:this.props.width&&{width:this.props.width}},o?React.createElement(Spinner,{className:"bolt-suggestions-spinner flex-grow flex-center justify-center",label:r}):i?s?s():this.noResults():this.renderSuggestions())},t.prototype.componentDidMount=function(){this.scrollSelected()},t.prototype.componentDidUpdate=function(){this.scrollSelected()},t.prototype.noResults=function(){var e=this.props.noResultsFoundText;return e?React.createElement("div",{role:"alert",className:"bolt-suggestions-none flex-row flex-grow flex-center"},e):null},t.prototype.renderSuggestions=function(){var e=this,t=this.props,s=t.createDefaultItem,n=t.renderSuggestion,o=t.onSuggestionClicked,r=t.suggestionsItemClassName,i=t.resultsMaximumNumber,l=t.selectedIndex,c=t.suggestions,a=t.suggestionsContainerAriaLabel,u=t.width;return React.createElement(Observer,{suggestions:c,selectedIndex:l},function(t){i&&(t.suggestions=t.suggestions.slice(0,i));var l=t.suggestions;return s&&l.unshift(s(l)),React.createElement("div",{"aria-label":a,className:"bolt-suggestions-container flex-column flex-grow v-scroll-auto h-scroll-hidden",id:getSafeId("suggestion-list"),role:"list",style:u&&{width:u}},React.createElement("div",{className:"bolt-suggestion-spacer",onMouseDown:preventDefault}),t.suggestions.map(function(s,i){var l=i===t.selectedIndex;return React.createElement("div",{key:getSafeId("sug-"+i),ref:l?e.selectedElement:"",role:"listitem"},React.createElement(SuggestionsItem,{className:r,id:getSafeId("sug-item"+i),index:i,isSelected:l,item:s,onClick:o,renderSuggestion:n}))}),React.createElement("div",{className:"bolt-suggestion-spacer",onMouseDown:preventDefault}))})},t.prototype.scrollSelected=function(){this.selectedElement.current&&void 0!==this.selectedElement.current.scrollIntoView&&this.selectedElement.current.scrollIntoView(!1)},t}(React.Component);export{SuggestionsList};