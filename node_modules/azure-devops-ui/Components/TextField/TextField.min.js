import*as tslib_1 from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./TextField.css";import*as React from"react";import{Observer}from"../../Observer";import{css,getSafeId}from"../../Util";import{Icon}from"../../Icon";import{FormItemContext}from"../../FormItem";import{FocusWithin}from"../../FocusWithin";import{FocusZoneContext}from"../../FocusZone";import{getTabIndex}from"../../Utilities/Focus";var inputId=1,TextField=function(e){function t(t){var n=e.call(this,t)||this;return n.inputElement=React.createRef(),n.select=function(){n.inputElement.current&&n.inputElement.current.select()},n.onInputChange=function(e){var t=n.props.onChange;t&&t(e,e.target.value),n.adjustInputHeight()},n.inputId="textfield-input-"+inputId++,n}return tslib_1.__extends(t,e),t.prototype.componentDidMount=function(){this.adjustInputHeight()},t.prototype.focus=function(){this.inputElement.current&&this.inputElement.current.focus()},t.prototype.setSelectionRange=function(e,t,n){this.inputElement.current&&this.inputElement.current.setSelectionRange(e,t,n)},t.prototype.render=function(){var e=this,t=this.props,n=t.activatable,o=t.ariaExpanded,r=t.ariaHasPopup,i=t.ariaLabel,a=t.autoAdjustHeight,l=t.autoComplete,s=t.autoFocus,u=t.className,c=t.containerClassName,p=t.disabled,d=t.focusTreatment,m=void 0===d?0:d,f=t.inputClassName,b=t.inputId,x=t.inputType,h=t.label,I=t.maxLength,g=t.multiline,y=t.onBlur,v=t.onClick,E=t.onFocus,F=t.onKeyDown,C=t.onKeyPress,R=t.onKeyUp,N=t.placeholder,_=t.prefixIconProps,w=t.readOnly,B=t.required,H=t.resizable,S=t.role,T=t.rows,j=t.spellCheck,K=t.style,k=t.value,D=t.width,O=this.props,P=O.ariaDescribedBy,z=O.suffixIconProps,L=React.createElement(FocusWithin,{onFocus:E,onBlur:y},function(t){return React.createElement(FormItemContext.Consumer,null,function(d){var y=g?"textarea":"input",E=g?{rows:T}:{type:x,autoComplete:l?"on":"off"};return void 0===z&&d.error&&(z={className:"bolt-textfield-message-error",iconName:"Error"}),void 0===P&&(P=d.ariaDescribedById),React.createElement("div",{className:css("flex-column",c,"auto"!==D&&D)},React.createElement("div",{className:css(!h&&u,"bolt-textfield flex-row flex-center",p&&"disabled",0===m&&"focus-treatment",1===m&&"focus-keyboard-only",t.hasFocus&&"focused",1===K&&"bolt-textfield-inline",d.error&&"bolt-textfield-error")},React.createElement(FocusZoneContext.Consumer,null,function(l){return React.createElement(Observer,{value:k||""},function(u){return React.createElement(React.Fragment,null,_&&Icon(tslib_1.__assign({},_,{className:css(_.className,"prefix",!_.render&&"bolt-textfield-icon",(N&&!u.value||_.render)&&"bolt-textfield-no-text")})),React.createElement(y,tslib_1.__assign({},E,{"aria-describedby":getSafeId(P),"aria-disabled":p,"aria-expanded":o,"aria-haspopup":r,"aria-label":i,"aria-labelledby":getSafeId(d.ariaLabelledById),autoFocus:s,"data-focuszone":p||e.props.excludeFocusZone?void 0:l.focuszoneId,disabled:p,className:css(f,"bolt-textfield-input flex-grow",a&&"bolt-textfield-auto-adjust",H&&"bolt-textfield-auto-unresizable",_&&"bolt-textfield-input-with-prefix",z&&"bolt-textfield-input-with-suffix",n&&"activatable"),id:getSafeId(b||e.inputId),maxLength:I,onBlur:t.onBlur,onClick:v,onChange:e.onInputChange,onFocus:t.onFocus,onKeyDown:F,onKeyPress:C,onKeyUp:R,placeholder:N,readOnly:w,required:B,ref:e.inputElement,role:S,spellCheck:j,tabIndex:getTabIndex(e.props),value:u.value})),z&&Icon(tslib_1.__assign({},z,{className:css(z.className,"suffix",!z.render&&"bolt-textfield-icon",(N&&!u.value||z.render)&&"bolt-textfield-no-text")})))})})))})});return h?React.createElement("div",{className:css(u,"flex-column")},React.createElement("label",{htmlFor:getSafeId(b||this.inputId),className:"bolt-textfield-label"},h),L):L},t.prototype.adjustInputHeight=function(){this.props.multiline&&this.props.autoAdjustHeight&&this.inputElement.current&&(this.inputElement.current.style.height="",this.inputElement.current.style.height=this.inputElement.current.scrollHeight+"px")},t}(React.Component);export{TextField};