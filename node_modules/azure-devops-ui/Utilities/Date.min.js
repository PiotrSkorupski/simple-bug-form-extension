import{format}from"../Core/Util/String";import*as PlatformResources from"../Resources.Core";export var millisecond=1;export var second=1e3*millisecond;export var minute=60*second;export var hour=60*minute;export var day=24*hour;export var week=7*day;export var AgoFormat;!function(t){t[t.Compact=0]="Compact",t[t.Extended=1]="Extended"}(AgoFormat||(AgoFormat={}));var agoFormatters={};export function ago(t,e,o,r){var a=agoFormatters[r||""];a||(agoFormatters[r||""]=a={}),o||(o=new Date),e||(e=0);var m=o.getTime()-t.getTime(),n="";if(m<2*minute)n=PlatformResources.JustNow;else if(0===e)if(m<59*minute)n=format(PlatformResources.AgoMinutes,Math.round(m/minute));else if(o.getDate()===t.getDate()&&o.getMonth()===t.getMonth()&&o.getFullYear()===t.getFullYear())n=format(PlatformResources.AgoHours,Math.round(m/hour));else if(m<week&&o.getDay()!==t.getDay()){if((u=new Date).setDate(o.getDate()-1),t.getDate()===u.getDate())n=PlatformResources.Yesterday;else{var i={weekday:"long"};n=t.toLocaleString(r,i)}}else o.getFullYear()===t.getFullYear()?(a.ctShortFormat=a.ctShortFormat||new Intl.DateTimeFormat(r,{month:"short",day:"numeric"}),n=a.ctShortFormat.format(t)):(a.ctLongFormat=a.ctLongFormat||new Intl.DateTimeFormat(r,{month:"short",year:"numeric",day:"numeric"}),n=a.ctLongFormat.format(t));else if(1===e){var s="";if(o.getDate()===t.getDate()&&o.getMonth()===t.getMonth()&&o.getFullYear()===t.getFullYear())s=PlatformResources.Today;else if(m<week&&o.getDay()!==t.getDay()){var u=new Date;u.setDate(o.getDate()-1),t.getDate()===u.getDate()?s=PlatformResources.Yesterday:(a.exWeekFormat=a.exWeekFormat||new Intl.DateTimeFormat(r,{weekday:"short"}),s=a.exWeekFormat.format(t))}else o.getFullYear()===t.getFullYear()?(a.exMonthFormat=a.exMonthFormat||new Intl.DateTimeFormat(r,{month:"short",day:"numeric"}),s=a.exMonthFormat.format(t)):(a.exYearFormat=a.exYearFormat||new Intl.DateTimeFormat(r,{month:"short",year:"numeric",day:"numeric"}),s=a.exYearFormat.format(t));a.timeFormat=a.timeFormat||new Intl.DateTimeFormat(r,{hour:"numeric",minute:"numeric"});var l=a.timeFormat.format(t);n=format(PlatformResources.DayAtTimeFormat,s,l)}return n||(n=t.toString()),n};export var LogType;!function(t){t[t.Full=0]="Full",t[t.Date=1]="Date",t[t.Local=2]="Local"}(LogType||(LogType={}));var logFormatters={};export function log(t,e,o){var r=logFormatters[o||""];r||(logFormatters[o||""]=r={});var a="";if(e||(e=0),0===e)a=t.toISOString();else if(1===e){r.dayFormatShort=r.dayFormatShort||new Intl.DateTimeFormat(o,{month:"2-digit",day:"2-digit"});var m=r.dayFormatShort.format(t);r.timeFormatShort=r.timeFormatShort||new Intl.DateTimeFormat(o,{hour:"2-digit",minute:"2-digit",hour12:!1,timeZoneName:"short"});a=m+" "+r.timeFormatShort.format(t)}else 2===e&&(r.timeFormatLong=r.timeFormatLong||new Intl.DateTimeFormat(o,{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZoneName:"short"}),a=r.timeFormatLong.format(t));return a||(a=t.toString()),a};export function duration(t,e){e||(e=new Date);var o=e.getTime()-t.getTime(),r="";if(o<second)r=PlatformResources.LessThanASecond;else if(o<minute)r=format(PlatformResources.Seconds,Math.floor(o/second));else{var a=Math.floor(o/day),m=Math.floor(o%day/hour),n=Math.floor(o%hour/minute),i=Math.floor(o%minute/second);r=o<hour?format(PlatformResources.MinutesSeconds,n,i):o<day?format(PlatformResources.HoursMinutesSeconds,m,n,i):format(PlatformResources.DaysHoursMinutes,a,m,n)}return r};var tooltipFormatters={};export function tooltipString(t,e){var o=tooltipFormatters[e||""];return o||(tooltipFormatters[e||""]=o={}),o.dayFormat=o.dayFormat||new Intl.DateTimeFormat(e,{month:"short",year:"numeric",day:"numeric"}),o.timeFormat=o.timeFormat||new Intl.DateTimeFormat(e,{hour:"numeric",minute:"numeric",timeZoneName:"short"}),format(PlatformResources.DayAtTimeFormat,o.dayFormat.format(t),o.timeFormat.format(t))};