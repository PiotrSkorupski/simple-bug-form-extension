var EventGroup=function(){function e(t){this.id=e.uniqueId++,this.isDisposed=!1,this.parent=t,this.eventRecords=[]}return e.raise=function(t,n,i,r){var s;if(e.isElement(t)){var a=document.createEvent("HTMLEvents");a.initEvent(n,r||!1,!0),Object.assign(a,i)}else for(;t&&!1!==s;){var o=t.__events__,l=o?o[n]:null;if(l)for(var v in l)if(l.hasOwnProperty(v))for(var p=l[v],c=0;!1!==s&&c<p.length;c++){var f=p[c];f.objectCallback&&(s=f.objectCallback.call(f.parent,i))}t=r?t.parent:null}return s},e.isElement=function(e){return!!e&&(!!e.addEventListener||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement)},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.off(),this.parent=null)},e.prototype.on=function(t,n,i){var r=this;if(n.indexOf(",")>-1){l=n.split(/[,]+/);for(var s in l)this.on(t,s,i)}else{var a=this.parent,o={target:t,eventName:n,parent:a,callback:i};t.__events__||(t.__events__={});var l;if((l=t.__events__)[n]||(l[n]={}),l[n][this.id]||(l[n][this.id]=[]),l[n][this.id].push(o),e.isElement(t)){var v=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!r.isDisposed){var n=i.apply(a,e);if(!1===n&&e[0]){var s=e[0];s.preventDefault&&s.preventDefault(),s.stopPropagation&&s.stopPropagation(),s.cancelBubble=!0}return n}};o.elementCallback=v,t.addEventListener&&t.addEventListener(n,v)}else{var p=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!r.isDisposed)return i.apply(a,e)};o.objectCallback=p}this.eventRecords.push(o)}},e.prototype.off=function(e,t,n){for(var i=0;i<this.eventRecords.length;i++){var r=this.eventRecords[i];if(!(e&&e!==r.target||t&&t!==r.eventName||n&&n!==r.callback)){var s=r.target.__events__,a=s[r.eventName],o=a?a[this.id]:null;o&&(1!==o.length&&n?o.splice(o.indexOf(r),1):delete s[r.eventName][this.id],0===Object.keys(s[r.eventName]).length&&delete s[r.eventName]),r.elementCallback&&r.target.removeEventListener(r.eventName,r.elementCallback,r.options),this.eventRecords.splice(i--,1)}}},e.prototype.raise=function(t,n,i){return e.raise(this.parent,t,n,i)},e.uniqueId=0,e}();export{EventGroup};