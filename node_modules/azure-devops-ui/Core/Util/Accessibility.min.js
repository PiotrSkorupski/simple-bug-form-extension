function getAnnounceContainer(){var n=document.getElementById(ParentContainerId);return n||((n=document.createElement("div")).id=ParentContainerId,n.classList.add("visually-hidden"),document.body.appendChild(n)),n}var MaxAnnounceChildren=1,MaxAnnounceContainers=10,DefaultAnnounceDelay=1e3,ParentContainerId="utils-accessibility-announce",nextId=0;export function announce(n,e,t){if(void 0===e&&(e=!1),void 0===t&&(t=50),n){var o=e?"assertive":"polite",i=getAnnounceContainer(),a=i.getElementsByClassName(o),r=a.length>0?a[a.length-1]:null;if(!r||r.childElementCount>=MaxAnnounceChildren)(r=document.createElement("div")).id=ParentContainerId+nextId++,r.setAttribute("aria-live",o),r.classList.add(o),r.setAttribute("aria-relevant","additions"),i.appendChild(r),a.length>MaxAnnounceContainers&&i.removeChild(a[0]),window.setTimeout(function(){announce(n,e)},t);else{var s=document.createElement("p");s.textContent=n,r.appendChild(s),r.style.visibility="hidden",r.style.visibility="visible"}}};var ProgressAnnouncer=function(){function n(n){this._startAnnounced=!1,this._completed=!1,this._options=n,this._start()}return n.forPromise=function(e,t){var o=new n(t);return e.then(function(){o.announceCompleted()},function(){o.announceError()}),o},n.prototype.announceCompleted=function(){this._completed||(this._completed=!0,this._startAnnounced&&announce(this._options.announceEndMessage))},n.prototype.announceError=function(){this._completed||(this._completed=!0,announce(this._options.announceErrorMessage))},n.prototype.cancel=function(){this._completed=!0},n.prototype._start=function(){var n=this;window.setTimeout(function(){n._completed||announce(n._options.announceStartMessage),n._startAnnounced=!0},void 0!==this._options.announceStartDelay?this._options.announceStartDelay:DefaultAnnounceDelay)},n}();export{ProgressAnnouncer};