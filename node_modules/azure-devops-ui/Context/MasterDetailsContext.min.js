import*as React from"react";import{ObservableValue}from"../Core/Observable";var BaseMasterDetailsContext=function(){return function(e,t){var a=this;this.getCurrentLayer=function(){return a.payload},this.getStack=function(){return a.payloadStack},this.push=function(e){a.payloadStack.push(e),e.onPushed&&e.onPushed(a),a.payload.value=a.payloadStack[a.payloadStack.length-1]},this.pop=function(){var e=a.payloadStack.pop();return e&&e.onPopped&&e.onPopped(a),a.payloadStack.length>0?a.payload.value=a.payloadStack[a.payloadStack.length-1]:a.onExit(),e},this.payload=new ObservableValue(e),this.payloadStack=[e],this.onExit=t,e.onPushed&&e.onPushed(this)}}();export{BaseMasterDetailsContext};export var MasterDetailsContext=React.createContext(new BaseMasterDetailsContext({key:"",masterPanelContent:{},detailsContent:{renderContent:function(){return React.createElement("div",null)}},selectedMasterItem:new ObservableValue(null)},function(){}));export function bindSelectionToObservable(e,t,a){var n=t.value.findIndex(function(e){return e===a.value});n>=0&&e.select(n),e.subscribe(function(e){if(e[0]){var n=e[0].beginIndex;a.value=t.value[n]}})};export function createChildLayer(e,t,a,n,o,r){return{key:e,masterPanelContent:t,detailsContent:a,selectedMasterItem:new ObservableValue(n),parentItem:o.selectedMasterItem.value,onPushed:r}};